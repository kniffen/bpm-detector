(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{174:function(e,t,n){var content=n(223);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(22).default)("3ba34bf4",content,!0,{sourceMap:!1})},222:function(e,t,n){"use strict";var r=n(174);n.n(r).a},223:function(e,t,n){(t=n(21)(!1)).push([e.i,".listener[data-v-7cd79677]{display:grid;grid-gap:calc(var(--spacing)*2);align-content:start;text-align:center}@-webkit-keyframes shadow-pulse-data-v-7cd79677{0%{box-shadow:0 0 0 0 #000}to{box-shadow:0 0 0 35px transparent}}@keyframes shadow-pulse-data-v-7cd79677{0%{box-shadow:0 0 0 0 #000}to{box-shadow:0 0 0 35px transparent}}.icon[data-v-7cd79677]{margin:0 auto;border-radius:50%;padding:var(--spacing);-webkit-animation:shadow-pulse-data-v-7cd79677 .5s infinite;animation:shadow-pulse-data-v-7cd79677 .5s infinite}.status[data-v-7cd79677]{height:2rem}.unavailable[data-v-7cd79677]{font-weight:700;color:#e00000}",""]),e.exports=t},232:function(e,t,n){"use strict";n.r(t);n(35);var r,o,c=n(3),d=n(208),l=n.n(d),v=n(182),h=n(164),f=null,m=null,source=null,w=[],_=null,L={name:"listen",components:{Share:h.a},data:function(){return{bpm:0,deviceSupported:!0,isListening:!1,isFail:!1,device:""}},methods:{toggleListening:function(e){var t=this;e.preventDefault(),this.isListening?this.stopListening():navigator.getUserMedia({audio:!0,video:!1},this.startListening,(function(e){t.isFail=!0,t.stopListening(),console.log(e)}))},startListening:(o=Object(c.a)(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(clearTimeout(_),e.prev=1,"suspended"!=f.state){e.next=5;break}return e.next=5,f.resume();case 5:this.device=t.getTracks()[0].label,w=[],this.bpm=0,(source=f.createMediaStreamSource(t)).connect(m),m.connect(f.destination),this.isListening=!0,_=setTimeout((function(){if(w.length<=0)return n.isFail=!0,void n.stopListening();n.stopListening()}),3e4),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(1),clearTimeout(_),this.isFail=!0,this.stopListening();case 20:case"end":return e.stop()}}),e,this,[[1,15]])}))),function(e){return o.apply(this,arguments)}),stopListening:function(){clearTimeout(_);try{source.disconnect(m),m.disconnect(f.destination)}catch(e){console.log(e)}this.device="",this.isListening=!1}},mounted:(r=Object(c.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getUserMedia&&AudioContext){e.next=5;break}return t.deviceSupported=!1,e.abrupt("return");case 5:f||(f=new AudioContext),(m=f.createScriptProcessor(4096,1,1)).onaudioprocess=function(e){t.isListening&&(!w.duration||w.duration<30)&&(w=l.a.concat(w,e.inputBuffer),t.bpm=Object(v.a)(w))},t.stopListening();case 9:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)}),beforeDestroy:function(){this.stopListening()}},x=(n(222),n(7)),component=Object(x.a)(L,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[n("div",{staticClass:"listener"},[n("h1",[e._v(" Listen to audio device")]),e._v(" "),n("svg-icon",{staticClass:"icon",style:"animation-duration: "+(e.isListening?60/e.bpm:0)+"s;",attrs:{name:"microphone",width:"300",height:"300",viewBox:"0 0 300 300"}}),e._v(" "),e.deviceSupported?e._e():n("div",{staticClass:"unavailable"},[e._v("Device is not supported")]),e._v(" "),e.deviceSupported?n("div",{staticClass:"status"},[e.isFail?n("span",[e._v("Error collecting samples"),n("br")]):e.device?n("span",[e._v("Collecting samples from"),n("br"),e._v(e._s(e.device))]):n("span",[e._v("Awaiting input"),n("br")])]):e._e(),e._v(" "),e.deviceSupported?n("button",{on:{click:e.toggleListening}},[e._v(e._s(e.isListening?"Cancel":"Start listening"))]):e._e(),e._v(" "),e.deviceSupported?n("h1",[e._v(e._s(e.isFail?0:e.bpm)+"BPM")]):e._e()],1),e._v(" "),n("Share")],1)}),[],!1,null,"7cd79677",null);t.default=component.exports}}]);