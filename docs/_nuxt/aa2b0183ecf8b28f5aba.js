(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{157:function(t,n,e){var content=e(159);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(21).default)("a898c392",content,!0,{sourceMap:!1})},158:function(t,n,e){"use strict";var r=e(157);e.n(r).a},159:function(t,n,e){(t.exports=e(20)(!1)).push([t.i,".share[data-v-0427e458]{text-align:center;padding:calc(var(--spacing)*8) 0}.shareButtons[data-v-0427e458]{display:flex;flex-wrap:wrap;justify-content:center}.shareButtons a[data-v-0427e458]:not(:last-child){margin:0 var(--spacing) var(--spacing) 0}",""])},160:function(t,n,e){"use strict";var r=e(5),component=Object(r.a)({},function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"advert"},[n("adsbygoogle",{attrs:{"ad-slot":"8462239994"}})],1)},[],!1,null,null,null);n.a=component.exports},161:function(t,n,e){"use strict";e(158);var r=e(5),component=Object(r.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"share"},[e("h1",[t._v("Share")]),t._v(" "),e("div",{staticClass:"shareButtons a2a_kit a2a_kit_size_32 a2a_default_style",attrs:{"data-a2a-url":"https://bpmdetector.net","data-a2a-title":"BPM Detector"}},[e("a",{staticClass:"a2a_dd",attrs:{href:"https://www.addtoany.com/share"}}),t._v(" "),e("a",{staticClass:"a2a_button_facebook"}),t._v(" "),e("a",{staticClass:"a2a_button_twitter"}),t._v(" "),e("a",{staticClass:"a2a_button_email"}),t._v(" "),e("a",{staticClass:"a2a_button_pinterest"}),t._v(" "),e("a",{staticClass:"a2a_button_google_gmail"}),t._v(" "),e("a",{staticClass:"a2a_button_tumblr"}),t._v(" "),e("a",{staticClass:"a2a_button_digg"}),t._v(" "),e("a",{staticClass:"a2a_button_myspace"}),t._v(" "),e("a",{staticClass:"a2a_button_vk"})]),t._v(" "),e("script",[t._v("\n  var a2a_config = a2a_config || {};\n  a2a_config.num_services = 10;\n  ")]),t._v(" "),e("script",{attrs:{async:"",src:"https://static.addtoany.com/menu/page.js"}})])}],!1,null,"0427e458",null);n.a=component.exports},168:function(t,n,e){"use strict";(function(t){e.d(n,"a",function(){return r});e(169);function r(n){var e=function(t,n){for(var e=[],i=0;i<t.length;i++)for(var r=t[i],o=function(o){if(i+o>=t.length)return"break";for(var c=t[i+o],l=60*n/(c.position-r.position);l<90;)l*=2;for(;l>180;)l/=2;l=Math.round(l);var d=e.findIndex(function(t){return t.tempo==l});d>=0?e[d].count++:e.push({tempo:l,count:1})},c=1;c<8;c++){var l=o(c);if("break"===l)break}return e.sort(function(a,b){return b.count-a.count}),e}(function(data,t){for(var n=data[0].length/t,e=[],i=0;i<n;i++){for(var r=0,o=i*t;o<(i+1)*t;o++){var c=Math.max(Math.abs(data[0][o]),Math.abs(data[1][o]));(!r||c>r.volume)&&(r={position:o,volume:c})}e.push(r)}return e}([n.getChannelData(0),n.numberOfChannelsaudio>1?t.getChannelData(1):n.getChannelData(0)],n.sampleRate),n.sampleRate);return e[0]?e[0].tempo:0}}).call(this,e(178).Buffer)},171:function(t,n,e){var content=e(216);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(21).default)("7175195b",content,!0,{sourceMap:!1})},215:function(t,n,e){"use strict";var r=e(171);e.n(r).a},216:function(t,n,e){(t.exports=e(20)(!1)).push([t.i,".listener[data-v-a4b6d23a]{display:grid;grid-gap:calc(var(--spacing)*2);align-content:start;text-align:center}@-webkit-keyframes shadow-pulse-data-v-a4b6d23a{0%{box-shadow:0 0 0 0 #000}to{box-shadow:0 0 0 35px transparent}}@keyframes shadow-pulse-data-v-a4b6d23a{0%{box-shadow:0 0 0 0 #000}to{box-shadow:0 0 0 35px transparent}}.icon[data-v-a4b6d23a]{margin:0 auto;border-radius:50%;padding:var(--spacing);-webkit-animation:shadow-pulse-data-v-a4b6d23a .5s infinite;animation:shadow-pulse-data-v-a4b6d23a .5s infinite}.status[data-v-a4b6d23a]{height:2rem}",""])},223:function(t,n,e){"use strict";e.r(n);e(57);var r,o,c=e(8),l=e(203),d=e.n(l),v=e(168),h=e(160),f=e(161),_=null,m=null,source=null,w=[],x=null,C={name:"listen",components:{Advert:h.a,Share:f.a},data:function(){return{bpm:0,isListening:!1,isFail:!1,device:""}},methods:{toggleListening:function(t){var n=this;t.preventDefault(),this.isListening?this.stopListening():navigator.getUserMedia({audio:!0,video:!1},this.startListening,function(t){n.isFail=!0,n.stopListening(),console.log(t)})},startListening:(o=Object(c.a)(regeneratorRuntime.mark(function t(n){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(clearTimeout(x),t.prev=1,"suspended"!=_.state){t.next=5;break}return t.next=5,_.resume();case 5:this.device=n.getTracks()[0].label,w=[],this.bpm=0,(source=_.createMediaStreamSource(n)).connect(m),m.connect(_.destination),this.isListening=!0,x=setTimeout(function(){if(w.length<=0)return e.isFail=!0,void e.stopListening();e.stopListening()},3e4),t.next=20;break;case 15:t.prev=15,t.t0=t.catch(1),clearTimeout(x),this.isFail=!0,this.stopListening();case 20:case"end":return t.stop()}},t,this,[[1,15]])})),function(t){return o.apply(this,arguments)}),stopListening:function(){clearTimeout(x);try{source.disconnect(m),m.disconnect(_.destination)}catch(t){console.log(t)}this.device="",this.isListening=!1}},mounted:(r=Object(c.a)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=this,_||(_=new AudioContext),(m=_.createScriptProcessor(4096,1,1)).onaudioprocess=function(t){n.isListening&&(!w.duration||w.duration<30)&&(w=d.a.concat(w,t.inputBuffer),n.bpm=Object(v.a)(w))},n.stopListening();case 5:case"end":return t.stop()}},t,this)})),function(){return r.apply(this,arguments)}),beforeDestroy:function(){this.stopListening()}},L=(e(215),e(5)),component=Object(L.a)(C,function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("main",[e("div",{staticClass:"listener"},[e("h1",[t._v(" Listen to audio device")]),t._v(" "),e("svg-icon",{staticClass:"icon",style:"animation-duration: "+(t.isListening?60/t.bpm:0)+"s;",attrs:{name:"microphone",width:"300",height:"300",viewBox:"0 0 300 300"}}),t._v(" "),e("div",{staticClass:"status"},[t.isFail?e("span",[t._v("Error collecting samples"),e("br")]):t.device?e("span",[t._v("Collecting samples from"),e("br"),t._v(t._s(t.device))]):e("span",[t._v("Awaiting input"),e("br")])]),t._v(" "),e("button",{on:{click:t.toggleListening}},[t._v(t._s(t.isListening?"Cancel":"Start listening"))]),t._v(" "),e("h1",[t._v(t._s(t.isFail?0:t.bpm)+"BPM")])],1),t._v(" "),e("Advert"),t._v(" "),e("Share")],1)},[],!1,null,"a4b6d23a",null);n.default=component.exports}}]);