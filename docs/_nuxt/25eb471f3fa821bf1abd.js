(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{158:function(t,e,n){var content=n(160);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(23).default)("a898c392",content,!0,{sourceMap:!1})},159:function(t,e,n){"use strict";var r=n(158);n.n(r).a},160:function(t,e,n){(t.exports=n(22)(!1)).push([t.i,".share[data-v-0427e458]{text-align:center;padding:calc(var(--spacing)*8) 0}.shareButtons[data-v-0427e458]{display:flex;flex-wrap:wrap;justify-content:center}.shareButtons a[data-v-0427e458]:not(:last-child){margin:0 var(--spacing) var(--spacing) 0}",""])},161:function(t,e,n){"use strict";var r=n(6),component=Object(r.a)({},function(){var t=this.$createElement,e=this._self._c||t;return e("center",{staticClass:"advert"},[e("adsbygoogle",{attrs:{"ad-slot":"8462239994"}})],1)},[],!1,null,null,null);e.a=component.exports},162:function(t,e,n){"use strict";n(159);var r=n(6),component=Object(r.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"share"},[n("h1",[t._v("Share")]),t._v(" "),n("div",{staticClass:"shareButtons a2a_kit a2a_kit_size_32 a2a_default_style",attrs:{"data-a2a-url":"https://bpmdetector.net","data-a2a-title":"BPM Detector"}},[n("a",{staticClass:"a2a_dd",attrs:{href:"https://www.addtoany.com/share"}}),t._v(" "),n("a",{staticClass:"a2a_button_facebook"}),t._v(" "),n("a",{staticClass:"a2a_button_twitter"}),t._v(" "),n("a",{staticClass:"a2a_button_email"}),t._v(" "),n("a",{staticClass:"a2a_button_pinterest"}),t._v(" "),n("a",{staticClass:"a2a_button_google_gmail"}),t._v(" "),n("a",{staticClass:"a2a_button_tumblr"}),t._v(" "),n("a",{staticClass:"a2a_button_digg"}),t._v(" "),n("a",{staticClass:"a2a_button_myspace"}),t._v(" "),n("a",{staticClass:"a2a_button_vk"})]),t._v(" "),n("script",[t._v("\n  var a2a_config = a2a_config || {};\n  a2a_config.num_services = 10;\n  ")]),t._v(" "),n("script",{attrs:{async:"",src:"https://static.addtoany.com/menu/page.js"}})])}],!1,null,"0427e458",null);e.a=component.exports},169:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return r});n(170);function r(e){var n=function(t,e){for(var n=[],i=0;i<t.length;i++)for(var r=t[i],o=function(o){if(i+o>=t.length)return"break";for(var c=t[i+o],l=60*e/(c.position-r.position);l<90;)l*=2;for(;l>180;)l/=2;l=Math.round(l);var v=n.findIndex(function(t){return t.tempo==l});v>=0?n[v].count++:n.push({tempo:l,count:1})},c=1;c<8;c++){var l=o(c);if("break"===l)break}return n.sort(function(a,b){return b.count-a.count}),n}(function(data,t){for(var e=data[0].length/t,n=[],i=0;i<e;i++){for(var r=0,o=i*t;o<(i+1)*t;o++){var c=Math.max(Math.abs(data[0][o]),Math.abs(data[1][o]));(!r||c>r.volume)&&(r={position:o,volume:c})}n.push(r)}return n}([e.getChannelData(0),e.numberOfChannelsaudio>1?t.getChannelData(1):e.getChannelData(0)],e.sampleRate),e.sampleRate);return n[0]?n[0].tempo:0}}).call(this,n(180).Buffer)},172:function(t,e,n){var content=n(218);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(23).default)("52eacfbf",content,!0,{sourceMap:!1})},217:function(t,e,n){"use strict";var r=n(172);n.n(r).a},218:function(t,e,n){(t.exports=n(22)(!1)).push([t.i,".listener[data-v-1e81450a]{display:grid;grid-gap:calc(var(--spacing)*2);align-content:start;text-align:center}@-webkit-keyframes shadow-pulse-data-v-1e81450a{0%{box-shadow:0 0 0 0 #000}to{box-shadow:0 0 0 35px transparent}}@keyframes shadow-pulse-data-v-1e81450a{0%{box-shadow:0 0 0 0 #000}to{box-shadow:0 0 0 35px transparent}}.icon[data-v-1e81450a]{margin:0 auto;border-radius:50%;padding:var(--spacing);-webkit-animation:shadow-pulse-data-v-1e81450a .5s infinite;animation:shadow-pulse-data-v-1e81450a .5s infinite}.status[data-v-1e81450a]{height:2rem}",""])},227:function(t,e,n){"use strict";n.r(e);n(40);var r,o,c=n(5),l=n(205),v=n.n(l),d=n(169),f=n(161),h=n(162),_=null,m=null,source=null,w=[],x=null,C={name:"listen",components:{Advert:f.a,Share:h.a},data:function(){return{bpm:0,isListening:!1,isFail:!1,device:""}},methods:{toggleListening:function(t){var e=this;t.preventDefault(),this.isListening?this.stopListening():navigator.getUserMedia({audio:!0,video:!1},this.startListening,function(t){e.isFail=!0,e.stopListening(),console.log(t)})},startListening:(o=Object(c.a)(regeneratorRuntime.mark(function t(e){var n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(clearTimeout(x),t.prev=1,"suspended"!=_.state){t.next=5;break}return t.next=5,_.resume();case 5:this.device=e.getTracks()[0].label,w=[],this.bpm=0,(source=_.createMediaStreamSource(e)).connect(m),m.connect(_.destination),this.isListening=!0,x=setTimeout(function(){if(w.length<=0)return n.isFail=!0,void n.stopListening();n.stopListening()},3e4),t.next=20;break;case 15:t.prev=15,t.t0=t.catch(1),clearTimeout(x),this.isFail=!0,this.stopListening();case 20:case"end":return t.stop()}},t,this,[[1,15]])})),function(t){return o.apply(this,arguments)}),stopListening:function(){clearTimeout(x);try{source.disconnect(m),m.disconnect(_.destination)}catch(t){console.log(t)}this.device="",this.isListening=!1}},mounted:(r=Object(c.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,_||(_=new AudioContext),(m=_.createScriptProcessor(4096,1,1)).onaudioprocess=function(t){e.isListening&&(!w.duration||w.duration<30)&&(w=v.a.concat(w,t.inputBuffer),e.bpm=Object(d.a)(w))},e.stopListening();case 6:case"end":return t.stop()}},t,this)})),function(){return r.apply(this,arguments)}),beforeDestroy:function(){this.stopListening()}},k=(n(217),n(6)),component=Object(k.a)(C,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",[n("div",{staticClass:"listener"},[n("h1",[t._v(" Listen to audio device")]),t._v(" "),n("svg-icon",{staticClass:"icon",style:"animation-duration: "+(t.isListening?60/t.bpm:0)+"s;",attrs:{name:"microphone",width:"300",height:"300",viewBox:"0 0 300 300"}}),t._v(" "),n("div",{staticClass:"status"},[t.isFail?n("span",[t._v("Error collecting samples"),n("br")]):t.device?n("span",[t._v("Collecting samples from"),n("br"),t._v(t._s(t.device))]):n("span",[t._v("Awaiting input"),n("br")])]),t._v(" "),n("button",{on:{click:t.toggleListening}},[t._v(t._s(t.isListening?"Cancel":"Start listening"))]),t._v(" "),n("h1",[t._v(t._s(t.isFail?0:t.bpm)+"BPM")])],1),t._v(" "),n("Advert"),t._v(" "),n("Share")],1)},[],!1,null,"1e81450a",null);e.default=component.exports}}]);